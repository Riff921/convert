<!doctype html>
<html lang="id" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>JPG to PDF Generator</title><!-- PWA Meta Tags -->
  <meta name="theme-color" content="#10b981">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <meta name="apple-mobile-web-app-title" content="JPG to PDF">
  <meta name="description" content="Konversi gambar JPG menjadi file PDF dengan mudah dan cepat"><!-- PWA Icons -->
  <link rel="icon" type="image/png" sizes="192x192" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9IiMxMGI5ODEiLz4KPHN2ZyB4PSI0OCIgeT0iNDgiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiPgo8cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00IDE2bDQuNTg2LTQuNTg2YTIgMiAwIDAxMi44MjggMEwxNiAxNm0tMi0ybDEuNTg2LTEuNTg2YTIgMiAwIDAxMi44MjggMEwyMCAxNG0tNi02aC4wMU02IDIwaDEyYTIgMiAwIDAwMi0yVjZhMiAyIDAgMDAtMi0ySDZhMiAyIDAgMDAtMiAydjEyYTIgMiAwIDAwMiAyeiIvPgo8L3N2Zz4KPC9zdmc+">
  <link rel="apple-touch-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTkyIiBoZWlnaHQ9IjE5MiIgdmlld0JveD0iMCAwIDE5MiAxOTIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiByeD0iMjQiIGZpbGw9IiMxMGI5ODEiLz4KPHN2ZyB4PSI0OCIgeT0iNDgiIHdpZHRoPSI5NiIgaGVpZ2h0PSI5NiIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9IndoaXRlIiBzdHJva2Utd2lkdGg9IjIiPgo8cGF0aCBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGQ9Ik00IDE2bDQuNTg2LTQuNTg2YTIgMiAwIDAxMi44MjggMEwxNiAxNm0tMi0ybDEuNTg2LTEuNTg2YTIgMiAwIDAxMi44MjggMEwyMCAxNG0tNi02aC4wMU02IDIwaDEyYTIgMiAwIDAwMi0yVjZhMiAyIDAgMDAtMi0ySDZhMiAyIDAgMDAtMiAydjEyYTIgMiAwIDAwMiAyeiIvPgo8L3N2Zz4KPC9zdmc+"><!-- PWA Manifest -->
  <link rel="manifest" href="data:application/json;base64,ewogICJuYW1lIjogIkpQRyB0byBQREYgR2VuZXJhdG9yIiwKICAic2hvcnRfbmFtZSI6ICJKUEcyUERGIiwKICAiZGVzY3JpcHRpb24iOiAiS29udmVyc2kgZ2FtYmFyIEpQRyBtZW5qYWRpIGZpbGUgUERGIGRlbmdhbiBtdWRhaCBkYW4gY2VwYXQiLAogICJzdGFydF91cmwiOiAiLyIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiI2Y5ZmJmZiIsCiAgInRoZW1lX2NvbG9yIjogIiMxMGI5ODEiLAogICJpY29ucyI6IFsKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlNVGt5SWlCb1pXbG5hSFE5SWpFNU1pSWlkbWxsZDBKdmVEMGlNQ0F3SURFNU1pQXhPVElpSUdacGJHdzlJbTV2Ym1VaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJK0NqeHlaV04wSUhkcFpIUm9QU0l4T1RJaUlHaGxhV2RvZEQwaU1Ua3lJaUJ5ZUQwaU1qUWlJR1pwYkd3OUlpTXhNR0k1T0RFaUx6NEtQSE4yWnlCNFBTSTBPQ0lnZVQwaU5EZ2lJSGRwWkhSb1BTSTVOaUlnYUdWcFoyaDBQU0k1TmlJZ2RtbGxkMEp2ZUQwaU1DQXdJREkwSURJMElpQm1hV3hzUFNKdWIyNWxJaUJ6ZEhKdmEyVTlJbmRvYVhSbElpQnpkSEp2YTJVdGQybGtkR2c5SWpJaVBnbzhjR0YwYUNCemRISnZhMlV0YkdsdVpXTmhjRDBpY205MWJtUWlJSE4wY205clpTMXNhVzVsYW05cGJqMGljbTkxYm1RaUlHUTlJazAwSURFMmJEUXVOVGcyTFRRdU5UZzJZVElnTWlBd0lEQXhNaTQ0TWpnZ01FeE1NVFlnTVRadExUSXRNbXd4TGpVNE5pMHhMalU0Tm1FeUlESWdNQ0F3TVRJdU9ESTRJREJNTWpBZ01UUnRMVFl0Tm1ndU1ERk5OaUF5TUdneE1tRXlJRElnTUNBd01pMHlWalpoTWlBeUlEQWdNREF0TWkweUlEWmhNaUF5SURBZ01EQXlJRElhSWk4K0Nqd3ZjM1puUGdvOEwzTjJaejRLIiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9zdmcreG1sIgogICAgfSwKICAgIHsKICAgICAgInNyYyI6ICJkYXRhOmltYWdlL3N2Zyt4bWw7YmFzZTY0LFBITjJaeUIzYVdSMGFEMGlOVEV5SWlCb1pXbG5hSFE5SWpVeE1pSWlkbWxsZDBKdmVEMGlNQ0F3SURRNU1pQTBPVElpSUdacGJHdzlJbTV2Ym1VaUlIaHRiRzV6UFNKb2RIUndPaTh2ZDNkM0xuY3pMbTl5Wnk4eU1EQXdMM04yWnlJK0NqeHlaV04wSUhkcFpIUm9QU0kwT1RJaUlHaGxhV2RvZEQwaU5Ea3lJaUJ5ZUQwaU5qUWlJR1pwYkd3OUlpTXhNR0k1T0RFaUx6NEtQSE4yWnlCNFBTSXhNalFpSUhrOUlqRXlOQ0lnZDJsa2RHZzlJakkwTkNJZ2FHVnBaMmgwUFNJeU5EUWlJSFpwWlhkQ2IzZzlJakFnTUNBeU5DQXlOQ0lnWm1sc2JEMGlibTl1WlNJZ2MzUnliMnRsUFNKM2FHbDBaU0lnYzNSeWIydGxMWGRwWkhSb1BTSXlJajRLUEhCaGRHZ2djM1J5YjJ0bExXeHBibVZqWVhBOUluSnZkVzVrSWlCemRISnZhMlV0YkdsdVpXcHZhVzQ5SW5KdmRXNWtJaUJrUFNKTk5DQXhObXcwTGpVNE5pMDBMalU0Tm1FeUlESWdNQ0F3TVRJdU9ESTRJREJNTVRZZ01UWnRMVEl0TW13eExqVTROaTB4TGpVNE5tRXlJRElnTUNBd01USXVPREk0SURBZ1RESXdJREUwYlMwMkxUWm9MVzR3TVUwMklESXdhREV5WVRJZ01pQXdJREF3TWkweVZqWmhNaUF5SURBZ01EQXRNaTB5U0RaaE1pQXlJREFnTURBeUlESWFJaTgrQ2p3dmMzWm5QZ284TDNOMlp6NEsiLAogICAgICAic2l6ZXMiOiAiNTEyeDUxMiIsCiAgICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgICB9CiAgXQp9">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        .upload-area {
            border: 2px dashed #e5e7eb;
            transition: all 0.3s ease;
        }
        
        .upload-area:hover {
            border-color: #3b82f6;
            background-color: #f8fafc;
        }
        
        .upload-area.dragover {
            border-color: #3b82f6;
            background-color: #eff6ff;
        }
        
        .progress-bar {
            transition: width 0.3s ease;
        }
        
        .image-preview {
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .loading-spinner {
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        .success-message {
            animation: fadeIn 0.5s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .install-pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .orientation-option.selected {
            border-color: #10b981;
            background-color: #f0fdf4;
        }

        .orientation-option.selected svg {
            color: #10b981;
        }

        .orientation-option.selected span {
            color: #065f46;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full bg-gradient-to-br from-green-50 to-emerald-100 font-sans">
  <div class="min-h-full flex flex-col"><!-- Header -->
   <header class="bg-white shadow-sm border-b">
    <div class="max-w-4xl mx-auto px-6 py-4">
     <div class="flex items-center justify-between">
      <div class="text-center flex-1">
       <h1 id="app-title" class="text-2xl font-bold text-gray-900">JPG to PDF Generator</h1>
       <p id="app-subtitle" class="text-sm text-gray-600">Konversi gambar JPG Anda menjadi file PDF dengan mudah</p>
      </div><button id="install-btn" class="hidden bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors flex items-center space-x-2 install-pulse">
       <svg class="w-4 h-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3M3 17V7a2 2 0 012-2h6l2 2h6a2 2 0 012 2v10a2 2 0 01-2 2H5a2 2 0 01-2-2z"></path>
       </svg><span>Install App</span> </button>
     </div>
    </div>
   </header><!-- PWA Install Banner -->
   <div id="pwa-banner" class="hidden bg-green-600 text-white px-6 py-3">
    <div class="max-w-4xl mx-auto flex items-center justify-between">
     <div class="flex items-center space-x-3">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 18h.01M8 21h8a2 2 0 002-2V5a2 2 0 00-2-2H8a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
      </svg>
      <div>
       <p class="font-medium">Install JPG to PDF Generator</p>
       <p class="text-sm text-green-100">Akses cepat tanpa browser, bekerja offline!</p>
      </div>
     </div>
     <div class="flex items-center space-x-2"><button id="install-banner-btn" class="bg-white text-green-600 px-4 py-2 rounded font-medium text-sm hover:bg-green-50 transition-colors"> Install </button> <button id="dismiss-banner" class="text-green-100 hover:text-white p-1">
       <svg class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
       </svg></button>
     </div>
    </div>
   </div><!-- Main Content -->
   <main class="flex-1 max-w-4xl mx-auto w-full px-6 py-8"><!-- Upload Section -->
    <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
     <div class="text-center mb-6">
      <svg class="mx-auto h-16 w-16 text-green-500 mb-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
      </svg>
      <h2 class="text-xl font-semibold text-gray-900 mb-2">Upload Gambar JPG</h2>
      <p class="text-gray-600">Pilih satu atau beberapa gambar JPG untuk dikonversi menjadi PDF</p>
     </div>
     <div id="upload-area" class="upload-area rounded-lg p-8 text-center cursor-pointer"><input type="file" id="image-input" accept="image/jpeg,image/jpg" multiple class="hidden">
      <div id="upload-content">
       <svg class="mx-auto h-12 w-12 text-gray-400 mb-4" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
       </svg>
       <p class="text-lg font-medium text-gray-700 mb-2" id="upload-text">Klik untuk memilih gambar JPG</p>
       <p class="text-sm text-gray-500">atau seret dan lepas gambar di sini</p>
       <p class="text-xs text-gray-400 mt-2">Bisa pilih beberapa gambar sekaligus • Maksimal 5MB per gambar</p>
      </div>
     </div><!-- Image Preview Section -->
     <div id="preview-section" class="hidden mt-6">
      <div class="flex items-center justify-between mb-4">
       <h3 class="text-lg font-semibold text-gray-900">Gambar yang Dipilih</h3><button id="clear-images" class="text-red-500 hover:text-red-700 text-sm font-medium transition-colors"> Hapus Semua </button>
      </div>
      <div id="images-grid" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 mb-6"><!-- Image previews will be populated here -->
      </div>
     </div><!-- PDF Settings Section -->
     <div id="pdf-settings" class="hidden mt-6 p-6 bg-gray-50 rounded-lg border">
      <h3 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
       <svg class="w-5 h-5 mr-2 text-green-600" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
       </svg> Pengaturan PDF</h3>
      <div class="grid md:grid-cols-2 gap-6"><!-- File Name Setting -->
       <div><label for="pdf-filename" class="block text-sm font-medium text-gray-700 mb-2"> Nama File PDF </label> <input type="text" id="pdf-filename" class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 transition-colors" placeholder="Masukkan nama file (tanpa .pdf)" value="">
        <p class="text-xs text-gray-500 mt-1">Kosongkan untuk menggunakan nama otomatis dengan timestamp</p>
       </div><!-- Orientation Setting -->
       <div><label class="block text-sm font-medium text-gray-700 mb-2"> Orientasi PDF </label>
        <div class="flex space-x-4"><label class="flex items-center cursor-pointer"> <input type="radio" name="pdf-orientation" value="portrait" checked class="sr-only">
          <div class="orientation-option flex flex-col items-center p-3 border-2 border-gray-200 rounded-lg hover:border-green-300 transition-colors selected">
           <svg class="w-8 h-8 text-gray-600 mb-2" fill="none" stroke="currentColor" viewbox="0 0 24 24"><rect x="6" y="2" width="12" height="20" rx="2" ry="2" stroke-width="2"></rect>
           </svg><span class="text-sm font-medium text-gray-700">Portrait</span> <span class="text-xs text-gray-500">Tegak</span>
          </div></label> <label class="flex items-center cursor-pointer"> <input type="radio" name="pdf-orientation" value="landscape" class="sr-only">
          <div class="orientation-option flex flex-col items-center p-3 border-2 border-gray-200 rounded-lg hover:border-green-300 transition-colors">
           <svg class="w-8 h-8 text-gray-600 mb-2" fill="none" stroke="currentColor" viewbox="0 0 24 24"><rect x="2" y="6" width="20" height="12" rx="2" ry="2" stroke-width="2"></rect>
           </svg><span class="text-sm font-medium text-gray-700">Landscape</span> <span class="text-xs text-gray-500">Mendatar</span>
          </div></label>
        </div>
       </div>
      </div>
     </div><button id="convert-btn" class="hidden w-full mt-6 bg-green-600 hover:bg-green-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed"> <span id="convert-text">Buat PDF dan Download</span>
      <svg id="convert-spinner" class="hidden inline-block ml-2 h-4 w-4 loading-spinner" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
      </svg></button>
    </div><!-- Progress Section -->
    <div id="progress-section" class="hidden bg-white rounded-xl shadow-lg p-6 mb-8">
     <div class="flex items-center justify-between mb-2"><span class="text-sm font-medium text-gray-700">Membuat PDF...</span> <span id="progress-text" class="text-sm text-gray-600">0%</span>
     </div>
     <div class="w-full bg-gray-200 rounded-full h-2">
      <div id="progress-bar" class="progress-bar bg-green-600 h-2 rounded-full" style="width: 0%"></div>
     </div>
    </div><!-- Success Message -->
    <div id="success-message" class="hidden success-message bg-green-50 border border-green-200 rounded-lg p-6 mb-6">
     <div class="flex items-center">
      <svg class="h-8 w-8 text-green-500 mr-3" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <div>
       <h4 class="text-lg font-semibold text-green-800">PDF Berhasil Dibuat!</h4>
       <p class="text-green-700">File PDF telah didownload ke perangkat Anda.</p>
      </div>
     </div>
    </div><!-- Error Message -->
    <div id="error-message" class="hidden bg-red-50 border border-red-200 rounded-lg p-4 mb-6">
     <div class="flex items-center">
      <svg class="h-5 w-5 text-red-500 mr-2" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <p id="error-text" class="text-red-700"></p>
     </div>
    </div>
   </main><!-- Footer -->
   <footer class="bg-white border-t mt-auto">
    <div class="max-w-4xl mx-auto px-6 py-6">
     <div class="flex flex-col items-center space-y-3"><img id="footer-logo" src="https://iili.io/Kh6lMBI.webp" alt="PDF Generator Logo" class="w-10 h-10 rounded-lg shadow-md" onerror="this.src=''; this.alt='Logo failed to load'; this.style.display='none';">
      <p class="text-center text-sm text-gray-600">© 2025 JPG to PDF Generator. Konversi gambar menjadi PDF dengan mudah dan cepat.</p>
     </div>
    </div>
   </footer>
  </div>
  <script>
        // Configuration object
        const defaultConfig = {
            app_title: "JPG to PDF Generator",
            subtitle: "Konversi gambar JPG Anda menjadi file PDF dengan mudah",
            upload_text: "Klik untuk memilih gambar JPG",
            convert_text: "Buat PDF dan Download"
        };

        // Global variables
        let selectedImages = [];

        // DOM elements
        const uploadArea = document.getElementById('upload-area');
        const imageInput = document.getElementById('image-input');
        const previewSection = document.getElementById('preview-section');
        const imagesGrid = document.getElementById('images-grid');
        const clearImagesBtn = document.getElementById('clear-images');
        const convertBtn = document.getElementById('convert-btn');
        const convertSpinner = document.getElementById('convert-spinner');
        const progressSection = document.getElementById('progress-section');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');
        const successMessage = document.getElementById('success-message');
        const errorMessage = document.getElementById('error-message');
        const errorText = document.getElementById('error-text');

        // Render function for Element SDK
        async function render(config) {
            const appTitle = document.getElementById('app-title');
            const appSubtitle = document.getElementById('app-subtitle');
            const uploadTextElement = document.getElementById('upload-text');
            const convertTextSpan = document.getElementById('convert-text');

            if (appTitle) {
                appTitle.textContent = config.app_title || defaultConfig.app_title;
            }
            if (appSubtitle) {
                appSubtitle.textContent = config.subtitle || defaultConfig.subtitle;
            }
            if (uploadTextElement) {
                uploadTextElement.textContent = config.upload_text || defaultConfig.upload_text;
            }
            if (convertTextSpan) {
                convertTextSpan.textContent = config.convert_text || defaultConfig.convert_text;
            }
        }

        // Initialize Element SDK
        if (window.elementSdk) {
            window.elementSdk.init({
                defaultConfig: defaultConfig,
                render: render,
                mapToCapabilities: (config) => ({
                    recolorables: [],
                    borderables: [],
                    fontEditable: undefined,
                    fontSizeable: undefined
                }),
                mapToEditPanelValues: (config) => new Map([
                    ["app_title", config.app_title || defaultConfig.app_title],
                    ["subtitle", config.subtitle || defaultConfig.subtitle],
                    ["upload_text", config.upload_text || defaultConfig.upload_text],
                    ["convert_text", config.convert_text || defaultConfig.convert_text]
                ])
            });
        }

        // PWA Installation
        let deferredPrompt;
        const installBtn = document.getElementById('install-btn');
        const pwaBanner = document.getElementById('pwa-banner');
        const installBannerBtn = document.getElementById('install-banner-btn');
        const dismissBanner = document.getElementById('dismiss-banner');

        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            deferredPrompt = e;
            
            // Show install options
            installBtn.classList.remove('hidden');
            
            // Show banner after 3 seconds if not dismissed
            setTimeout(() => {
                if (deferredPrompt && !localStorage.getItem('pwa-banner-dismissed')) {
                    pwaBanner.classList.remove('hidden');
                }
            }, 3000);
        });

        async function installApp() {
            if (deferredPrompt) {
                deferredPrompt.prompt();
                const { outcome } = await deferredPrompt.userChoice;
                if (outcome === 'accepted') {
                    installBtn.classList.add('hidden');
                    pwaBanner.classList.add('hidden');
                }
                deferredPrompt = null;
            }
        }

        installBtn.addEventListener('click', installApp);
        installBannerBtn.addEventListener('click', installApp);

        dismissBanner.addEventListener('click', () => {
            pwaBanner.classList.add('hidden');
            localStorage.setItem('pwa-banner-dismissed', 'true');
        });

        window.addEventListener('appinstalled', () => {
            installBtn.classList.add('hidden');
            pwaBanner.classList.add('hidden');
        });

        // Register Service Worker
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                const swCode = `
                    const CACHE_NAME = 'jpg-to-pdf-v1';
                    const urlsToCache = [
                        '/',
                        'https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js',
                        'https://cdn.tailwindcss.com'
                    ];

                    self.addEventListener('install', (event) => {
                        event.waitUntil(
                            caches.open(CACHE_NAME)
                                .then((cache) => cache.addAll(urlsToCache))
                        );
                    });

                    self.addEventListener('fetch', (event) => {
                        event.respondWith(
                            caches.match(event.request)
                                .then((response) => {
                                    if (response) {
                                        return response;
                                    }
                                    return fetch(event.request);
                                })
                        );
                    });
                `;
                
                const blob = new Blob([swCode], { type: 'application/javascript' });
                const swUrl = URL.createObjectURL(blob);
                
                navigator.serviceWorker.register(swUrl)
                    .then((registration) => {
                        console.log('SW registered: ', registration);
                    })
                    .catch((registrationError) => {
                        console.log('SW registration failed: ', registrationError);
                    });
            });
        }

        // File upload handling
        uploadArea.addEventListener('click', () => {
            imageInput.click();
        });

        uploadArea.addEventListener('dragover', (e) => {
            e.preventDefault();
            uploadArea.classList.add('dragover');
        });

        uploadArea.addEventListener('dragleave', () => {
            uploadArea.classList.remove('dragover');
        });

        uploadArea.addEventListener('drop', (e) => {
            e.preventDefault();
            uploadArea.classList.remove('dragover');
            const files = Array.from(e.dataTransfer.files);
            handleFileSelect(files);
        });

        imageInput.addEventListener('change', (e) => {
            const files = Array.from(e.target.files);
            handleFileSelect(files);
        });

        function handleFileSelect(files) {
            const validFiles = files.filter(file => {
                if (!file.type.match(/^image\/(jpeg|jpg)$/)) {
                    showError(`File ${file.name} bukan format JPG yang valid.`);
                    return false;
                }
                if (file.size > 5 * 1024 * 1024) { // 5MB limit
                    showError(`File ${file.name} terlalu besar. Maksimal 5MB per gambar.`);
                    return false;
                }
                return true;
            });

            if (validFiles.length === 0) return;

            validFiles.forEach(file => {
                const reader = new FileReader();
                reader.onload = (e) => {
                    selectedImages.push({
                        file: file,
                        dataUrl: e.target.result,
                        name: file.name
                    });
                    updateImagePreview();
                };
                reader.readAsDataURL(file);
            });

            hideError();
        }

        function updateImagePreview() {
            if (selectedImages.length === 0) {
                previewSection.classList.add('hidden');
                document.getElementById('pdf-settings').classList.add('hidden');
                convertBtn.classList.add('hidden');
                return;
            }

            imagesGrid.innerHTML = '';
            selectedImages.forEach((image, index) => {
                const imageDiv = document.createElement('div');
                imageDiv.className = 'image-preview relative bg-gray-100 rounded-lg overflow-hidden';
                
                imageDiv.innerHTML = `
                    <img src="${image.dataUrl}" alt="${image.name}" class="w-full h-24 object-cover">
                    <button onclick="removeImage(${index})" class="absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-xs transition-colors">
                        ×
                    </button>
                    <p class="text-xs text-gray-600 p-2 truncate">${image.name}</p>
                `;
                
                imagesGrid.appendChild(imageDiv);
            });

            previewSection.classList.remove('hidden');
            document.getElementById('pdf-settings').classList.remove('hidden');
            convertBtn.classList.remove('hidden');
        }

        window.removeImage = function(index) {
            selectedImages.splice(index, 1);
            updateImagePreview();
        };

        clearImagesBtn.addEventListener('click', () => {
            selectedImages = [];
            imageInput.value = '';
            updateImagePreview();
        });

        // PDF Settings Event Listeners
        document.querySelectorAll('input[name="pdf-orientation"]').forEach(radio => {
            radio.addEventListener('change', (e) => {
                // Remove selected class from all options
                document.querySelectorAll('.orientation-option').forEach(option => {
                    option.classList.remove('selected');
                });
                
                // Add selected class to chosen option
                e.target.parentElement.querySelector('.orientation-option').classList.add('selected');
            });
        });

        // Convert images to PDF
        convertBtn.addEventListener('click', async () => {
            if (selectedImages.length === 0) return;

            try {
                convertBtn.disabled = true;
                convertSpinner.classList.remove('hidden');
                progressSection.classList.remove('hidden');
                hideError();
                hideSuccess();

                await createPdfFromImages();
                
            } catch (error) {
                console.error('Conversion error:', error);
                showError('Terjadi kesalahan saat membuat PDF. Silakan coba lagi.');
            } finally {
                convertBtn.disabled = false;
                convertSpinner.classList.add('hidden');
                progressSection.classList.add('hidden');
            }
        });

        async function createPdfFromImages() {
            const { jsPDF } = window.jspdf;
            
            // Get PDF settings
            const orientation = document.querySelector('input[name="pdf-orientation"]:checked').value;
            const customFilename = document.getElementById('pdf-filename').value.trim();
            
            // Create PDF with selected orientation
            const pdf = new jsPDF({
                orientation: orientation, // 'portrait' or 'landscape'
                unit: 'mm',
                format: 'a4'
            });
            
            for (let i = 0; i < selectedImages.length; i++) {
                updateProgress((i / selectedImages.length) * 100);
                
                const image = selectedImages[i];
                
                // Add new page for each image (except the first one)
                if (i > 0) {
                    pdf.addPage();
                }
                
                // Get image dimensions
                const img = new Image();
                img.src = image.dataUrl;
                
                await new Promise((resolve) => {
                    img.onload = () => {
                        const pageWidth = pdf.internal.pageSize.getWidth();
                        const pageHeight = pdf.internal.pageSize.getHeight();
                        const margin = 20;
                        
                        const maxWidth = pageWidth - (margin * 2);
                        const maxHeight = pageHeight - (margin * 2);
                        
                        let imgWidth = img.width;
                        let imgHeight = img.height;
                        
                        // Scale image to fit page while maintaining aspect ratio
                        const widthRatio = maxWidth / imgWidth;
                        const heightRatio = maxHeight / imgHeight;
                        const ratio = Math.min(widthRatio, heightRatio);
                        
                        imgWidth *= ratio;
                        imgHeight *= ratio;
                        
                        // Center image on page
                        const x = (pageWidth - imgWidth) / 2;
                        const y = (pageHeight - imgHeight) / 2;
                        
                        pdf.addImage(image.dataUrl, 'JPEG', x, y, imgWidth, imgHeight);
                        resolve();
                    };
                });
            }
            
            updateProgress(100);
            
            // Generate filename
            let filename;
            if (customFilename) {
                // Use custom filename (remove any existing .pdf extension and add it)
                filename = customFilename.replace(/\.pdf$/i, '') + '.pdf';
            } else {
                // Use default filename with timestamp
                const timestamp = new Date().toISOString().slice(0, 19).replace(/:/g, '-');
                filename = `images-to-pdf-${timestamp}.pdf`;
            }
            
            // Download PDF
            pdf.save(filename);
            
            showSuccess();
        }

        function updateProgress(percent) {
            progressBar.style.width = `${percent}%`;
            progressText.textContent = `${Math.round(percent)}%`;
        }

        function showError(message) {
            errorText.textContent = message;
            errorMessage.classList.remove('hidden');
        }

        function hideError() {
            errorMessage.classList.add('hidden');
        }

        function showSuccess() {
            successMessage.classList.remove('hidden');
            setTimeout(() => {
                successMessage.classList.add('hidden');
            }, 5000);
        }

        function hideSuccess() {
            successMessage.classList.add('hidden');
        }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'992e03b6d5bd252c',t:'MTc2MTE4ODc0NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>